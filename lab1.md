# Лабораторная работа №1

## Задание 1

### Необходимые знания

* `&` в `shell` - запускает скрипт .sh в фоновом режиме.
* Как работает команда `cat` - выводит содержимое файла в консоль.
* Как работает команда `clear` - очищает содержимое клнсоли.
* Как работает команда `wc` - выводит три числа: количество строк, слов и байт.

### Задание

* Запустите скрипт `background.sh` в фоновом режиме.


```
./background.sh &
[2] 2689
lenovo@15ikb:~/Документы/OS labs/lab1/src$ 1 sec
2 sec
3 sec
4 sec
5 sec
6 sec
7 sec
8 sec
9 sec
10 sec
Done!

```


* Создайте текстовый файл и выведите его содержимое на экран терминала.

```
lenovo@15ikb:~/OS_labs/os_lab_2019/lab1/src$ touch file
lenovo@15ikb:~/OS_labs/os_lab_2019/lab1/src$ cat file
lenovo@15ikb:~/OS_labs/os_lab_2019/lab1/src$ cat file
hi

```

* Очистите окно терминала.

` clear `

* Посчитайте количество символов в файле.

```
lenovo@15ikb:~/OS_labs/os_lab_2019/lab1/src$ wc -m file
4 file
```


### Ресурсы

* [Небольшой справочник по основным утилитам командной строки, которые можно найти почти в любом дистрибутиве Linux.](https://searchdatacenter.techtarget.com/tutorial/77-Linux-commands-and-utilities-youll-actually-use)
* [Про `&` в `shell`.](https://stackoverflow.com/questions/13338870/what-does-at-the-end-of-a-linux-command-mean)

# Задание 2

### Необходимые знания

#### Как работает команда `grep`

$ grep [опции] шаблон [имя файла...]

>Опции - это дополнительные параметры, с помощью которых указываются различные настройки поиска и вывода, например количество строк или режим инверсии.    

>Шаблон - это любая строка или регулярное выражение, по которому будет вестись поиск.

>Файл и команда - это то место, где будет вестись поиск. Как вы увидите дальше, grep позволяет искать в нескольких файлах и даже в каталоге, используя рекурсивный режим.


####Как работает редирект в `bash`

>В данном случае, термин "редирект" или "перенаправление" означает возможность получить вывод из файла, команды, программы, сценария или даже отдельного блока в сценарии и передать его на вход в другой файл, команду, программу или сценарий.

Для того, чтобы перенаправить поток вывода с терминала в файл, используется знак «больше» (>).Для того, чтобы дописать информацию в конец файла, используется два знака «больше» (>>).

#### Что такое `pipe` в `bash`

>Pipe (конвеер) – это однонаправленный канал межпроцессного взаимодействия.

Конвейеры чаще всего используются в shell-скриптах для связи нескольких команд путем перенаправления вывода одной команды (stdout) на вход (stdin) последующей, используя символ конвеера ‘|’: `cmd1 | cmd2 | .... | cmdN`

Например
```
$ grep -i “error” ./log | wc -l
43
```
grep выполняет регистронезависимый поиск строки “error” в файле log, но результат поиска не выводится на экран, а перенаправляется на вход (stdin) команды wc, которая в свою очередь выполняет подсчет количества строк.

`https://habr.com/ru/post/195152/`

#### Специальные девайсы в nix системах (`/dev/null`, `/dev/full` и т.д.)

>/ dev / null - принимает и отбрасывает все записанные в него данные; обеспечивает чтение конца файла при чтении из него.

>// dev / full - создает непрерывный поток нулевых символов (байтов с нулевым значением) в качестве вывода при чтении из него и генерирует ошибку ENOSPC ("disk full") при попытке записи в него.

### Задание

* С помощью команды `grep`, используя `pipe` и редирект (`>`), запишите в файл `with_cake.txt` все строчки из файла `cake_rhymes.txt`, в которых есть слово `cake`.

`lenovo@15ikb:~/Документы/OS labs/lab1/src$ grep -i  "cake" ./cake_rhymes.txt  > with_cake.txt`
 не понимаю зачем нужен pipe...

* Сделайте команду `rm` "тихой", используя редирект в `/dev/null`.
`lenovo@15ikb:~/Документы/Test$ rm Test > /dev/null`

### Ресурсы

* [Небольшой справочник по основным утилитам командной строки, которые можно найти почти в любом дистрибутиве Linux.](https://searchdatacenter.techtarget.com/tutorial/77-Linux-commands-and-utilities-youll-actually-use)

* [Про `pipe`](https://www.geeksforgeeks.org/piping-in-unix-or-linux/)

* [Про то, как работают редиректы.](http://wiki.bash-hackers.org/howto/redirection_tutorial)

* [Про `/dev/null`, `/dev/full` и другие "special device files" в *nix системах](https://en.wikipedia.org/wiki/Device_file#Pseudo-devices)

# Задание 3

### Необходимые знания

* Права в linux
Есть три основных вида прав:

    r - чтение;
    w - запись;
    x - выполнение;
    s - выполнение  от имени суперпользователя (дополнительный);

Также есть три категории пользователей, для которых вы можете установить эти права на файл linux:

    u - владелец файла;
    g - группа файла;
    o - все остальные пользователи;


* Команда `chmod`
>Присваивает файлу определенные права.

Эта команда имеет типичный для команд linux синтаксис, сначала команда, затем опции, а в конце файл или папка, к которой ее нужно применить:
$ chmod опции права /путь/к/файлу

* Переменные окружения
>Переменные окружения в Linux - это специальные переменные, определенные оболочкой и используемые программами во время выполнения.

Они могут определяться системой и пользователем. Системные переменные окружения Linux определяются системой и используются программами системного уровня.

Например, команда PWD использует системную переменную, чтобы сохранять прежнюю рабочую директорию. Пользовательские переменные окружения устанавливаются пользователем, для текущей оболочки, временно или постоянно. Вся концепция добавления и удаления переменных оболочки крутится вокруг нескольких файлов, команд и различных оболочек.

* Команда `date` в bash
>Команда отображает дату/время.

Ситаксис её использования:
date +FORMAT
date +"%FORMAT"
date +"%FORMAT%FORMAT"
date +"%FORMAT-%FORMAT"

Что бы отобразить дату в формате mm-dd-yy используйте:
`$ date +"%m-%d-%y"`

Что бы отобразить год полностью:
`$ date +"%m-%d-%Y"`

Что бы отобразить дату в формате mm/dd/yy:
```
$ date +"%D"
```  
Что бы отобразить только время:
```
$ date +"%T"
```
Что бы оторазить только часы и минуты:
```
$ date +"%H-%M"
```
Что бы использовать дату через переменную:
```
$ NOW=$(date +"%m-%d-%Y")
$ echo $NOW
```

* Что такое `shebang`

Последовательность символов ( #!) называется shebang и используется, чтобы сообщить операционной системе, какой интерпретатор использовать для анализа остальной части файла.

### Задание

* Сделайте файл `hello.sh` исполняемым, выполните его.
Но он и так уже исполняемый...
```
lenovo@15ikb:~/Документы/OS labs/lab1/src$ ./hello.sh
Hello, world!
```

* Напишите `bash` скрипт, который выводит текущий путь, текущую дату и время, а также содержимое переменной окружения `PATH`.

```
lenovo@15ikb:~/Документы/OS labs/lab1/src$ chmod ugo+x script
lenovo@15ikb:~/Документы/OS labs/lab1/src$ ./script

/home/lenovo/Документы/OS labs/lab1/src
04-06-2020+19:45:07
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games

```

### Ресурсы

* [Вводная статья про то, как вообще работать с правами в Linux](https://www.linux.com/learn/understanding-linux-file-permissions)

* [Как напечатать дату и время.](https://unix.stackexchange.com/questions/85982/date-time-in-linux-bash)

* [Описание того, как работают переменные окружения.](https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-a-linux-vps)

# Задание 4\* (повышенной сложности)

### Необходимые знания

* Как работать с аргументами в `bash` скриптах
* Как работает команда `od`
* Специальные устройства в nix системах
* Как работает редирект

### Задание

* Напишите скрипт `average.sh`, который выводит количество и среднее арифмитическое его входных аргументов.

```
#!/bin/bash

for (( number = 1; number <= 150; number++ ))
do
	str=$str" $RANDOM"
done

echo $str > numbers.txt
echo $#

```

* С помощью `bash` и `dev/random` создайте файл `numbers.txt` из 150 рандомных чисел.


```
#!/bin/bash

for (( number = 1; number <= 150; number++ ))
do
	str=$str" $RANDOM"
done

echo $str > numbers.txt

```

* "Скормите" скрипту `average.sh` значения из файла `numbers.txt`.


`./average.sh $(numbers.txt)`

### Ресурсы

* [Google](https://www.google.com)
